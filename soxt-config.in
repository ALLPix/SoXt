#! /bin/sh
############################################################################

usage()
{
cat <<EOF
Usage: soxt-config [OPTIONS]
Options:
  --help | --usage
  --cppflags
  --ldflags
  --libs
  --datadir
  --ac-subst <subst>
  --have-feature <feature>
  --build <program> <sourcefile> [<sourcefile>]...
  --version
EOF
  exit $1
}

while test $# -gt 0; do
  case $1 in
    --cppflags)
      # NOTE: if we for some reason changes this so "includedir" is
      # not first, we need to fix up the examples/ and ivexamples/
      # configure.in scripts, as they shift off the first argument.
      echo -I@includedir@ @SOXT_EXTRA_CPPFLAGS@
      ;;
    --ldflags)
      echo -L@libdir@ @SOXT_EXTRA_LDFLAGS@
      ;;
    --libs)
      echo -lSoXt @SOXT_EXTRA_LIBS@
      ;;
    --datadir)
      echo @soxt_data_dir@
      ;;
    --version)
      echo @SOXT_VERSION@
      ;;
    --help | --usage)
      usage 0
      ;;
    --ac-subst)
      shift
      case $1 in
        GUI)             echo "@GUI@" ;;
        Gui)             echo "@Gui@" ;;
        gui)             echo "@gui@" ;;
        WIDGET)          echo "@WIDGET@" ;;
        WINWIDGET)       echo "@WINWIDGET@" ;;
        EVENT)           echo "@EVENT@" ;;
        COMPONENTHEADER) echo "@COMPONENTHEADER@" ;;
        *)
          echo "Error: no such AC_SUBST: $1" >&2
          exit 1
          ;;
      esac
      ;;
    --have-feature)
      shift
      case $1 in
        renderarea)       exit 0 ;;
        examinerviewer)   exit 0 ;;
        planeviewer)      exit 0 ;;
        walkviewer)       exit 0 ;;
        flyviewer)        exit 0 ;;
        materiallist)     exit 0 ;;
        *)                exit 1 ;;
      esac
      ;;
    --build)
      shift
      program=$1
      shift
      set -x
      @CXX@ \
        ${CPPFLAGS} -I@includedir@ @SOXT_EXTRA_CPPFLAGS@ \
        ${LDFLAGS} -L@libdir@ @SOXT_EXTRA_LDFLAGS@ \
        -o ${program} $@ \
        ${LIBS} -lSoXt @SOXT_EXTRA_LIBS@
      set +x
      ;;
    *)
      echo "Unknown option: \"$1\""
      usage 1 1>&2
      ;;
  esac
  shift
done

exit 0

